{"ast":null,"code":"import _objectSpread from\"/Users/manmanbbg/Desktop/degree/FYP/project/FYP_UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/manmanbbg/Desktop/degree/FYP/project/FYP_UI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useCallback}from\"react\";import axios from\"axios\";import{useSnackbar}from\"notistack\";var usePost=function usePost(_ref){var url=_ref.url,payload=_ref.payload;var apiUrl=window.siteSetting.dev?window.siteSetting.testApiUrl:window.siteSetting.apiUrl;var _useState=useState({data:null,isLoading:false,error:null}),_useState2=_slicedToArray(_useState,2),res=_useState2[0],setRes=_useState2[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var callAPI=useCallback(function(){setRes(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isLoading:true});});var token=localStorage.getItem(\"Token\");axios.post(apiUrl+url,payload,{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(response){setRes({data:response.data,isLoading:false,error:null});enqueueSnackbar(\"Successful\",{variant:\"success\"});}).catch(function(error){setRes({data:null,isLoading:false,error:error.response.data});enqueueSnackbar(\"Error\",{variant:\"error\"});});},[url,payload]);return[res,callAPI];};export default usePost;","map":{"version":3,"sources":["/Users/manmanbbg/Desktop/degree/FYP/project/FYP_UI/src/hooks/https/usePost.js"],"names":["useState","useCallback","axios","useSnackbar","usePost","url","payload","apiUrl","window","siteSetting","dev","testApiUrl","data","isLoading","error","res","setRes","enqueueSnackbar","callAPI","prevState","token","localStorage","getItem","post","headers","Authorization","then","response","variant","catch"],"mappings":"iVAAA,OAASA,QAAT,CAAmBC,WAAnB,KAAsC,OAAtC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,WAA5B,CAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,MAAsB,IAAnBC,CAAAA,GAAmB,MAAnBA,GAAmB,CAAdC,OAAc,MAAdA,OAAc,CACpC,GAAMC,CAAAA,MAAM,CAAGC,MAAM,CAACC,WAAP,CAAmBC,GAAnB,CACXF,MAAM,CAACC,WAAP,CAAmBE,UADR,CAEXH,MAAM,CAACC,WAAP,CAAmBF,MAFvB,CADoC,cAIdP,QAAQ,CAAC,CAAEY,IAAI,CAAE,IAAR,CAAcC,SAAS,CAAE,KAAzB,CAAgCC,KAAK,CAAE,IAAvC,CAAD,CAJM,wCAI7BC,GAJ6B,eAIxBC,MAJwB,gCAKRb,WAAW,EALH,CAK5Bc,eAL4B,cAK5BA,eAL4B,CAOpC,GAAMC,CAAAA,OAAO,CAAGjB,WAAW,CAAC,UAAM,CAChCe,MAAM,CAAC,SAACG,SAAD,wCAAqBA,SAArB,MAAgCN,SAAS,CAAE,IAA3C,IAAD,CAAN,CACA,GAAMO,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CAEApB,KAAK,CACFqB,IADH,CACQhB,MAAM,CAAGF,GADjB,CACsBC,OADtB,CAC+B,CAC3BkB,OAAO,CAAE,CAAEC,aAAa,kBAAYL,KAAZ,CAAf,CADkB,CAD/B,EAIGM,IAJH,CAIQ,SAACC,QAAD,CAAc,CAClBX,MAAM,CAAC,CAAEJ,IAAI,CAAEe,QAAQ,CAACf,IAAjB,CAAuBC,SAAS,CAAE,KAAlC,CAAyCC,KAAK,CAAE,IAAhD,CAAD,CAAN,CACAG,eAAe,CAAC,YAAD,CAAe,CAC5BW,OAAO,CAAE,SADmB,CAAf,CAAf,CAGD,CATH,EAUGC,KAVH,CAUS,SAACf,KAAD,CAAW,CAChBE,MAAM,CAAC,CAAEJ,IAAI,CAAE,IAAR,CAAcC,SAAS,CAAE,KAAzB,CAAgCC,KAAK,CAAEA,KAAK,CAACa,QAAN,CAAef,IAAtD,CAAD,CAAN,CACAK,eAAe,CAAC,OAAD,CAAU,CACvBW,OAAO,CAAE,OADc,CAAV,CAAf,CAGD,CAfH,EAgBD,CApB0B,CAoBxB,CAACvB,GAAD,CAAMC,OAAN,CApBwB,CAA3B,CAqBA,MAAO,CAACS,GAAD,CAAMG,OAAN,CAAP,CACD,CA7BD,CA+BA,cAAed,CAAAA,OAAf","sourcesContent":["import { useState, useCallback } from \"react\";\nimport axios from \"axios\";\nimport { useSnackbar } from \"notistack\";\n\nconst usePost = ({ url, payload }) => {\n  const apiUrl = window.siteSetting.dev\n    ? window.siteSetting.testApiUrl\n    : window.siteSetting.apiUrl;\n  const [res, setRes] = useState({ data: null, isLoading: false, error: null });\n  const { enqueueSnackbar } = useSnackbar();\n\n  const callAPI = useCallback(() => {\n    setRes((prevState) => ({ ...prevState, isLoading: true }));\n    const token = localStorage.getItem(\"Token\");\n\n    axios\n      .post(apiUrl + url, payload, {\n        headers: { Authorization: `Bearer ${token}` },\n      })\n      .then((response) => {\n        setRes({ data: response.data, isLoading: false, error: null });\n        enqueueSnackbar(\"Successful\", {\n          variant: \"success\",\n        });\n      })\n      .catch((error) => {\n        setRes({ data: null, isLoading: false, error: error.response.data });\n        enqueueSnackbar(\"Error\", {\n          variant: \"error\",\n        });\n      });\n  }, [url, payload]);\n  return [res, callAPI];\n};\n\nexport default usePost;\n"]},"metadata":{},"sourceType":"module"}